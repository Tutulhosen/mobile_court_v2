<style>
    table.fixed {
        table-layout: fixed;
    }

    table.fixed td {
        overflow: hidden;
        font-size: 14px !important;
    }

    div.smallhightspace {
        height: 15px;
    }

    .underline {
        text-decoration: underline;
    }

    div.bighightspace {
        height: 30px;
    }

    .content_form {
        /*min-height: 842px;  792px // 596 */
        width: 1200px;
        margin-left: auto;
        margin-right: auto;
        border: 1px dotted gray;
        font-family: nikoshBan;
    }

    .content_form_potrait {
        /*min-height: 842px;  792px // 596 */
        /*width: 792px;*/
        /*margin-left: auto;*/
        /*margin-right: auto;*/
        /*border: 1px dotted gray;*/
        /*font-size: 18px!important;*/
        /*font-family: nikoshBan!important;*/
        width: 612px;
        margin-left: auto;
        margin-right: auto;
        border: 1px dotted gray;
        font-family: nikoshBan;
        text-align: justify;
        text-justify: inter-word;
    }

    .content_form_height {
        /*min-height: 842px;  792px // 596 */
        min-height: 1654px;

    }

    .form_top_title {
        font-size: 24px;
    }

        {
        margin-top: -18px;
    }

    @media print {
        .content_form {
            border: 0px dotted;
        }

        .content_form_potrait {
            border: 0px dotted;
        }
    }

    p {
        text-align: justify !important;
    }

    p.p_indent {
        text-indent: 10px;
    }

    h3 {
        text-align: center;
    }

    h4 {
        text-align: center;
    }

    h5 {
        text-align: center;
    }

    h6 {
        text-align: center;
    }

    h3.top_title_2nd {
        margin-top: -18px;
    }

    h4.bottom_margin {
        margin-bottom: -18px;
    }

    .clear_div {
        clear: both;
        width: 100%;
        height: 20px;
    }

    br {
        line-height: 5px;
    }

    td.centertext {
        text-align: center;
    }

    td.smallhightspace {
        line-height: 15px;
        ;
    }

    td {
        font-size: 16px;
    }

    img.thumbnail {
        width: 150px;
        height: 50px;
    }
</style>

<div class="content_form_potrait">
    <div class="form_top_title">
        <table id="crimieDescription">
            <!-- row 1 -->
            <tr>
                <td colspan="2" style="text-align: left">বাংলাদেশ ফরম নং ৩৯৫৭</td>
            </tr>
            <!-- row 1 -->
            <tr>
                <td colspan="2" style="text-align: left">হাইকোর্ট ফৌজদারী পরোয়ানা নং ৩৪</td>
            </tr>
            <!-- row 3 -->
            <tr>
                <td style="width: 0%">
                </td>
                <td style="width: 100%; margin-right: 50px">
                    <table style="text-align: center">
                        <tr>
                            <td style="font-size: 22px; font:bold; text-decoration: underline"
                                id='c_agree_complain_head'></td>
                        </tr>
                        <tr>
                            <td> [১৮৯৮ সালের <u>৫নং আইন, ৫নং তফসিল,</u> ২৮(২) নং]</td>
                        </tr>
                        <tr>
                            <td colspan="2" class="smallhightspace"></td>
                        </tr>
                        <tr>
                            <td> (ফৌজদারী কার্যবিধির ২২১, ২২২, ২২৩ ধারা)</td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td colspan="2" class="smallhightspace"></td>
            </tr>
            <!-- row 4 -->
            <tr>
                <td style="width: 25%">(১) ম্যাজিস্ট্রেটের
                    নাম ও পদবি, অফিস
                    ইত্যাদি।
                </td>
                <td style="width: 75%">আমি (১ ) <b>
                        <span id='c_agree_m_name1'>c_agree_m_name1</span>, এক্সিকিউটিভ ম্যাজিস্ট্রেট,&nbsp;<span
                            id='c_agree_m_office1'>c_agree_m_office1</span>
                        <span id='c_agree_m_upazilaname'>c_agree_m_upazilaname</span>&nbsp;,&nbsp;
                        <span id='c_agree_m_zilla1'>c_agree_m_zilla1</span>-এর আদালত।</b></td>

            </tr>
            <tr>
                <td colspan="2" class="smallhightspace"></td>
            </tr>
            <!-- row 5 -->
            <tr>
                <td style="width: 25%;">
                    <table style="width: 100%;padding: 0">
                        <tr>
                            <td>(২) আসামির নাম
                                বয়স ও ঠিকানা</td>
                        </tr>
                    </table>
                </td>
                <td style="text-align: left">
                    <table style="width: 100%">
                        <tr>
                            <td> এতদ্বারা আপনি (২) <span id="crimminaldiv_chargeframe"></span>&nbsp;কে</td>
                        </tr>
                        <tr>
                            <td colspan="2" class="smallhightspace"></td>
                        </tr>
                        <tr style="width: 100%">
                            <td> নিম্নলিখিতরূপে অভিযুক্ত করিতেছি যেঃ—</td>
                        </tr>
                    </table>
                </td>
            </tr>
            <!-- row 6 -->
            <tr id ="insert1"></tr>
            <tr id ="insert2"></tr>
            <!-- row 8 -->
            <tr>
                <td><span id="lastrow">lastrow</span> ম্যাজিস্ট্রেট কর্তৃক বিচারের ক্ষেত্রে “ উক্ত আদালতে” কথাটি
                    কাটিয়া দিতে হইবে</td>
                <td>
                    <table>
                        <tr>
                            <td colspan="2">এবং এতদ্বারা আমি নির্দেশ দিতেছি যে, এই অভিযোগে আপনার বিচার অনুষ্ঠিত হইবে।
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2" class="smallhightspace"></td>
                        </tr>

                        <tr>
                            <td style="width: 40%">তারিখ: <span id='c_agree_date4'>c_agree_date4</span> </td>
                            <!-- <td style="width: 60%; text-align:center ;font-weight: bold">ম্যাজিস্ট্রেটের স্বাক্ষর ও সিলমোহর </td> -->
                            <td style="width: 60%; text-align:center ;font-weight: bold"></td>
                        </tr>
                        <tr>
                            <td style="width: 40%"></td>
                            <td style="width: 60%; text-align:center ">
                                <span id='c_agree_m_fp'></span></br>
                                <span id='c_agree_m_name2'>c_agree_m_name2</span></br>
                                <span id='c_agree_m_designation_bng'>c_agree_m_designation_bng</span></br>
                                <span id='c_agree_m_office2'>c_agree_m_office2</span>
                                <span id='c_agree_m_upazilaname2'>c_agree_m_upazilaname2</span></br>
                                <span id='c_agree_m_zilla2'>c_agree_m_zilla2</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td colspan="2" class="smallhightspace"></td>
            </tr>
        </table>
    </div>
</div>

<script>
    function isJson(str) {
        try {
            JSON.parse(str);
        } catch (e) {
            return false;
        }
        return true;
    }

    function convertEngNumberToBangla(number) {
        const banglaNumbers = ['০', '১', '২', '৩', '৪', '৫', '৬', '৭', '৮', '৯'];

        if (isNaN(number)) {
            return 'Invalid number';
        }

        return number.toString().split('').map(digit => banglaNumbers[digit] || digit).join('');
    }

    function c_agree_crimieDescription(prose, criminal, location, lawAnsSection) {

        var time = "";
        var date = "";
        var location_str = "";
        var crime_description = "";
        var lawSectionDescription = "";
        //        var law_section_description[] ="";
        var pro_zilla = "";
        var pro_upazilla = "";
        var section = 1;
        var law_section_description = [];
        var crimedescription = [];

        $.each(lawAnsSection, function(i, item) {
            var sec_title = item.sec_title;
            var sec_description = convertEngNumberToBangla(item.punishment_sec_number);

            law_section_description[i] = sec_title + "&nbsp;এর &nbsp;" + sec_description + "&nbsp;";
            if (isJson(item.Description)) {
                crimedescription.push(JSON.parse(item.Description));
            } else {
                crimedescription.push(item.Description);
            }

            section = i + 1;
        });

        //        alert(law_section_description[0]);
        lawSectionDescription = law_section_description.reverse();
        console.log(lawSectionDescription)
        time = tConvert_Global(prose.time.trim());

        var dateq = prose.date;
        var date_arr = dateq.split("-");
        // console.log(convertEngNumberToBangla(date_arr[2]))
        date = convertEngNumberToBangla(date_arr[2]) + "-" + convertEngNumberToBangla(date_arr[1]) + "-" +
            convertEngNumberToBangla(date_arr[0]);
        // console.log(date)

        //        $.each(prose, function(i, item)
        //        {
        //            time =  tConvert_Global(item.time.trim ());
        //
        //
        //            var dateq = item.date;
        //            var date_arr = dateq.split("-");
        //            date = date_arr[2] + "-" + date_arr[1] + "-" + date_arr[0];
        //
        //        });
        crimedescription = crimedescription.reverse();

        location_str = location;

        document.getElementById("c_agree_date4").innerHTML = date;

        var myTable = document.getElementById("crimieDescription");
        //        var rowCount = myTable.rows.length;
        //        for (var x = rowCount-1; x >= 10  ; x--) {
        //            myTable.deleteRow(x);
        //        }
        //        $("#insert").remove();

        var maxrow = 4; // 3  6  8
        if (section == 1) {
            document.getElementById("c_agree_complain_head").innerHTML = "একটি অভিযোগ";
            document.getElementById("lastrow").innerHTML = "(" + '৫' + ")";
            maxrow = 4;
        }
        if (section == 2) {
            document.getElementById("c_agree_complain_head").innerHTML = "দুটি অভিযোগ";
            document.getElementById("lastrow").innerHTML = "(" + '৭' + ")";
            maxrow = 6;
        }
        if (section == 3) {
            document.getElementById("c_agree_complain_head").innerHTML = "তিনটি অভিযোগ";
            document.getElementById("lastrow").innerHTML = "(" + '৯' + ")";
            maxrow = 8;
        }

        var lawno = 0;
        crimedescription = crimedescription.reverse();
        for (var i = maxrow; i > 2; i = i - 2) {
            var selnNostr = "";
            var selNo = i;

            // var new_row2 = document.createElement('tr');
            var new_row2 = document.getElementById('insert1');
            $('#insert1').html('');
            new_row2.insertCell(0).innerHTML = "(" + convertEngNumberToBangla(i) + ") আমার আদালতে বিচার্য।";
            new_row2.insertCell(1).innerHTML = "এবং তাহা (" + convertEngNumberToBangla(i) +
                ") <b>মোবাইল কোর্ট আইন ২০০৯ এর ৭(১) ধারার অনুযায়ী আমার আদালতে বিচার্য। </b>";
            // insertAfter(document.getElementById("insert"), new_row2);


            // var new_row = document.createElement('tr');
            var new_row = document.getElementById('insert2');
            $('#insert2').html('');
            var j = i - 1;
            if (j == 5) {
                selnNostr = "দ্বিতীয়ত্বঃ ";
            } else if (j == 7) {
                selnNostr = "তৃতীয়তঃ "
            } else {
                selnNostr = "";
            }
            new_row.insertCell(0).innerHTML = "(" + convertEngNumberToBangla(j) + ") অপরাধ বর্ণনা করুন";
            new_row.insertCell(1).innerHTML = selnNostr +
                "আপনি  " + date + " তারিখে বা ঐ দিন/রাত্রি আনুমানিক " +
                time + ",&nbsp;" + location_str + "&nbsp;স্থানে &nbsp;</br>" +
                '<div class="smallhightspace"></div>' +
                "(" + convertEngNumberToBangla(j) + ") " + crimedescription[lawno] + '।' +
                '<div class="smallhightspace"></div>' +
                "এবং ইহার দ্বারা  " + lawSectionDescription[lawno] + " ধারার অধীনে অপরাধ করিয়াছেন। " +
                '<div class="smallhightspace"></div>';
            // insertAfter(document.getElementById("insert"), new_row);
            lawno++;
        }

    }

    function insertAfter(target, el) {
        if (!target.nextSibling)
            target.parentNode.appendChild(el);
        else
            target.parentNode.insertBefore(el, target.nextSibling);
    }

    function c_agree_setParamsForcriminal(data, criminalID) {

        var html_criminal = "";
        var html_criminaldiv2 = "";
        var html_imprrint1 = "";
        $("#crimminaldiv_chargeframe").empty();
        $.each(data, function(i, item) {
            var imprint1 = item.imprint1 ? item.imprint1 : "";
            var occupation = item.occupation ? item.occupation : "";
            var age = item.age ? convertEngNumberToBangla(item.age) : "";

            if (item.id == criminalID) {
                html_criminaldiv2 += "<span> " + item.name_bng +
                    ",&nbsp;" + item.custodian_type + "&nbsp;:&nbsp;" + item.custodian_name +
                    ",&nbsp;বয়স - আনুমানিক:&nbsp;" + age + "&nbsp;বছর&nbsp;" +
                    ",&nbsp;পেশা-&nbsp;:&nbsp;" + occupation +
                    "&nbsp;ঠিকানা (পূর্ণাঙ্গ)&nbsp;:&nbsp;" + item.present_address;
            }
            if (imprint1) {

                html_imprrint1 += '<img class="thumbnail" id=c_agree_m_imprint1_criminal style="width:8%;"' +
                    'src=data:image/jpeg;base64,' + imprint1 +
                    '>';
            }

        });
        //             $("#c_agree_m_fp").append(html_imprrint1 );

        $("#crimminaldiv_chargeframe").append(html_criminaldiv2 + "</span>");


    }

    function c_agree_setParamsForjobdescription(data) {
        var upozilla = "";
        if (data.office_type == 2)
            upozilla = "";
        else
            upozilla = data.location_details ? " , " + data.location_details : "";
        document.getElementById("c_agree_m_office2").innerHTML = data.location_str;
        document.getElementById("c_agree_m_office1").innerHTML = data.location_str;
        document.getElementById("c_agree_m_zilla1").innerHTML = data.location_details;
        document.getElementById("c_agree_m_zilla2").innerHTML = data.location_details;
        document.getElementById("c_agree_m_upazilaname").innerHTML = upozilla;
        document.getElementById("c_agree_m_upazilaname2").innerHTML = upozilla;
        document.getElementById("c_agree_m_designation_bng").innerHTML = data.designation_bng;

        //        $.each(data, function(i, item)
        //        {
        //            var upozilla = "";
        //            if(item.office_type == 2)
        //                upozilla = "";
        //            else
        //                upozilla = item.upazilaname ?" , " +item.upazilaname : "";
        //            document.getElementById("c_agree_m_office2").innerHTML= item.location_str;
        //            document.getElementById("c_agree_m_office1").innerHTML= item.location_str;
        //            document.getElementById("c_agree_m_zilla1").innerHTML= item.zillaname;
        //            document.getElementById("c_agree_m_zilla2").innerHTML= item.zillaname;
        //            document.getElementById("c_agree_m_upazilaname").innerHTML= upozilla;
        //            document.getElementById("c_agree_m_upazilaname2").innerHTML= upozilla;
        //            document.getElementById("c_agree_m_designation_bng").innerHTML= item.designation_bng;
        //
        //        });
    }

    function c_agree_setParamsFormagistraten(data) {
        var html_imprrint1 = "";

        document.getElementById("c_agree_m_name1").innerHTML = data.name_eng;
        document.getElementById("c_agree_m_name2").innerHTML = data.name_eng;
        if (data.signature) {

            var path = "";
            if (base_path != "") {
                path = base_path + '/public/ecourt/Mobile/Signature/IMAGE/';
            } else {
                path = '/ecourt/Mobile/Signature/IMAGE/';
            }

            html_imprrint1 += '<img  class="thumbnail" id=c_agree_m_imprint1 ' +
                'src=' + path + data.signature +
                '>';
        }
        $("#c_agree_m_fp").html(html_imprrint1);

    }

    function tConvert(time) {
        // Check correct time format and split into components
        time = time.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/) || [time];

        if (time.length > 1) { // If time format correct
            time = time.slice(1); // Remove full string match value
            time[5] = +time[0] < 12 ? '' : ''; // Set AM/PM
            time[0] = +time[0] % 12 || 12; // Adjust hours
        }

        return time.join(''); // return adjusted time or original string
    }
</script>
